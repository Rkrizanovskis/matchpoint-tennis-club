<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Matchpoint Tennis Club - Member Portal</title>
    <link rel="stylesheet" href="styles.css?v=2025-09-05-remove-x">
    <link rel="stylesheet" href="modal-styles.css?v=2025-09-05-remove-x">
    <link rel="stylesheet" href="booking-loading.css">
    <link rel="stylesheet" href="club-wall-styles.css">
    <link rel="stylesheet" href="main-club-wall-styles.css">
    <link rel="stylesheet" href="instructor-styles.css">
    <link rel="stylesheet" href="loading-styles.css">
    
    <!-- Firebase SDK v8 -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
</head>
<body>
    <!-- Login Form -->
    <div id="loginForm" class="login-form">
        <div class="login-header">
            <div class="tennis-icon">üéæ</div>
            <h1 class="club-name">Matchpoint</h1>
            <h2 class="club-subtitle">Tennis Club</h2>
            <div class="club-location">Riga 2025 ‚Ä¢ Member Only</div>
        </div>
        <div class="login-content">
            <input type="password" id="passwordInput" placeholder="Enter member password" />
            <button onclick="login()">
                <span class="button-icon">üèÜ</span>
                Access Club
            </button>
            <div id="loginError" class="error"></div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" style="display: none;">
        <div class="loading-content">
            <div class="loading-logo">
                <div class="tennis-ball-bounce">üéæ</div>
                <h1>Matchpoint Tennis Club</h1>
            </div>
            <div class="loading-message">
                <div class="loading-text" id="loadingText">Initializing club system...</div>
                <div class="loading-spinner"></div>
            </div>
            <div class="loading-steps">
                <div class="step" id="step-firebase">üî• Connecting to Firebase</div>
                <div class="step" id="step-players">üë• Loading players</div>
                <div class="step" id="step-schedule">üìÖ Setting up schedule</div>
                <div class="step" id="step-messages">üí¨ Loading club wall</div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <button class="sidebar-toggle" onclick="toggleSidebar()" id="sidebarToggle" title="Admin Panel">
                <svg viewBox="0 0 24 24">                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
            </button>
        </div>

        <!-- Sidebar Panel -->
        <div class="sidebar-panel" id="sidebarPanel">
            <div class="sidebar-panel-header">
                <h3>Admin Panel</h3>
                <button class="btn secondary" onclick="toggleSidebar()">√ó</button>
            </div>
            <div class="sidebar-panel-content">
                <!-- Players Management -->
                <div class="admin-section">
                    <div class="admin-header">
                        <h4>Players Management</h4>
                        <button class="btn" onclick="showAddPlayer()">Add Player</button>
                    </div>
                    <div class="players-grid" id="playersGrid">
                        <!-- Players will be loaded here -->
                    </div>
                </div>

            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="container">
                <!-- Header -->
                <div class="header">
                    <h1>üéæ Matchpoint Tennis Club</h1>
                    <div class="week-nav">
                        <button onclick="changeWeek(-1)" id="prevWeekBtn">‚Üê Previous</button>
                        <span class="current-week" id="currentWeek">Loading...</span>
                        <button onclick="changeWeek(1)" id="nextWeekBtn">Next ‚Üí</button>
                    </div>
                </div>                <!-- Announcement Banner -->
                <div id="announcementBanner" class="announcement-banner" style="display: none;">
                    <div class="announcement-content">
                        <div class="announcement-text">
                            <div class="announcement-title">
                                <span class="announcement-icon">üèÜ</span>
                                <span>Next up: Chef's Invitational on Sep 7</span>
                            </div>
                            <div class="announcement-details">
                                Club Members and Friends Tournament - Registration open now!
                            </div>
                        </div>
                        <button class="announcement-close" onclick="closeAnnouncement()">√ó</button>
                    </div>
                </div>

                <!-- Schedule Grid -->
                <div class="schedule-grid" id="scheduleGrid">
                    <!-- Schedule will be loaded here -->
                </div>

                <!-- Club Wall Section -->
                <div class="club-wall-section">
                    <div class="club-wall-header">
                        <h2>üì¢ Club Wall</h2>
                        <button class="btn" onclick="showAddMessage()">Post Message</button>
                    </div>
                    <div class="messages-container" id="messagesContainer">
                        <!-- Messages will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Book Tennis Slot</h3>
                <button class="close" onclick="closeBookingModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="slotDetails" class="slot-details">
                    <!-- Slot details will be shown here -->
                </div>                <div class="form-group">
                    <label for="playerSelect">Select Player:</label>
                    <select id="playerSelect">
                        <option value="">Choose a player...</option>
                    </select>
                </div>
                <div class="current-players" id="currentPlayers">
                    <!-- Current players will be shown here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" onclick="closeBookingModal()">Cancel</button>
                <button class="btn" onclick="confirmBooking()">Confirm Booking</button>
            </div>
        </div>
    </div>

    <!-- Player Management Modal -->
    <div id="playerModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="playerModalTitle">Add Player</h3>
                <button class="close" onclick="closePlayerModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="playerForm">
                    <div class="form-group">
                        <label for="playerName">Player Name:</label>
                        <input type="text" id="playerName" placeholder="Enter player name" required maxlength="30">
                    </div>
                    <div class="form-group">
                        <label for="playerSkillLevel">Skill Level:</label>
                        <select id="playerSkillLevel" required>
                            <option value="">Select skill level</option>
                            <option value="beginner">Beginner</option>
                            <option value="regular">Regular</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" onclick="closePlayerModal()">Cancel</button>
                <button class="btn" onclick="savePlayer()" id="savePlayerBtn">Add Player</button>
            </div>
        </div>
    </div>

    <!-- Firebase Config -->
    <script src="firebase-config.js?v=2025-09-05-fix-cache"></script>
    
    <!-- Main Script -->
    <script src="script-firebase.js?v=2025-09-05-edit-player-fix"></script>
</body>
</html>